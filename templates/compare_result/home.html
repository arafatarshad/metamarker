
{% extends "dashboard_main_template/dashboard_main.html" %}
{% load staticfiles %}

{% block content %}


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.9.4/cytoscape.min.js"></script>
<script src="{% static 'js/excellentexport.js' %}"></script>
<link rel="stylesheet" href="{% static 'css/select2.css/' %}">

<style media="screen">

body {
  font-family: 'Open Sans', sans-serif;
  font-weight: 300;
}
 

.wrap1{
  display:relative !important;

  border: 5px solid #ddd;
 width:100%;
 height:1000px;
}

.wrap:after{
  display:table;
  clear:both;
}
 
.modal-dialog{
   width: 100%;
    overflow-y: initial !important
}
.modal-body{
    height: 450px;
    width:100%;
    overflow-y: auto;
}

</style>


 

<div class="box box-default">
  <div class="box-header with-border">
    <h3 class="box-title">Step 1</h3>
    <div class="box-tools pull-right">
      <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
    </div>
  </div>
  <div class="box-body">
  	<form name="panel_1_form" id="panel_1_form" action="{% url 'generate_panel_2' %}">
  		  	    <div hidden class="col-md-12 alert alert-info" id="selcetion_alert" role="alert">
           Select job for both the form.
		</div>  
    <div class="row">

      <div class="col-md-4">
        <div class="form-group">
            <label>Select The First job</label>
            <select class="form-control select2" style="width: 100%;" name="job1_select" id="job1_select"> 
            	{% for job in jobs %}
            		<option value={{job.id}}>{{job.name}}</option> 
				{% endfor %}
            </select>
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
            <label>Select The First job</label>
            <select class="form-control select2" style="width: 100%;" name="job2_select" id="job2_select"> 
            	            	{% for job in jobs %}
            		<option value={{job.id}}>{{job.name}}</option> 
				{% endfor %}

            </select>
        </div>
      </div>

      <div class="col-md-2">
        <div class="form-group">
            <label>Confirm</label>
            <button type="button" name="confirm" id="confirm" class="btn btn-success form-control" style="width: 100%;" onclick="generate_panel_2()">Submit</button>
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
            <label>Reset</label>
            <button type="button" name="reset" id="reset" class="btn btn-danger form-control" style="width: 100%;" onclick="all_panel_reset()">Reset</button>
        </div>
      </div>

    </div>

  	</form> 
  </div>
</div>

 
 <div class="box box-default">
  <div class="box-header with-border">
    <h3 class="box-title">Step 2</h3>
    <div class="box-tools pull-right">
      <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
    </div>
  </div> 
	<form name="panel_2_job_form" id="panel_2_job_form" action="{% url 'generate_panel_3' %}">
  		 
  	</form>   
</div>
{% endblock%}

{%block scripts %}
<script src="{% static 'js/select2.js' %}"></script>
<script type="text/javascript">
function render_panel_2(data){
	$("#panel_2_job_form").html(data);
}
function go_to_third_panel(){
	var job1=$('#job1_select').val();
	var job2=$('#job2_select').val();
	var job1_param=$('#job1_param').val();
	var job2_param=$('#job1_param').val();
	data={job1:job1,job2:job2,job1_param:job1_param,job2_param:job2_param};

	if((job1==null) || (job2==null)){ 
 		$('#selcetion_alert').fadeIn(1000).fadeOut(3000);
	}else{ 
		var token = '{{csrf_token}}';
		$.ajax({
			headers: { "X-CSRFToken": token },
			type: "POST",
            url: $("#panel_2_job_form").attr('action'), 
            data: data,
            success: function (data) { 
               console.log(data);
            },
            error: function (e) {
             alert('Error');
            }
        });	
	}	
}

function generate_panel_2(){
 	var job1=$('#job1_select').val();
	var job2=$('#job2_select').val();

	if((job1==null) || (job2==null)){ 
 		$('#selcetion_alert').fadeIn(1000).fadeOut(3000);
	}else{

		var token = '{{csrf_token}}';
		$.ajax({
			headers: { "X-CSRFToken": token },
			type: "POST",
            url: $("#panel_1_form").attr('action'), 
            data: $("#panel_1_form").serialize(),
            success: function (data) {
               render_panel_2(data); 
            },
            error: function (e) {
             alert('Error');
            }
        });		
	}
}		

</script>

<script type="text/javascript" src="{% static 'js/result_compare_js_1.js' %}"> </script>
{% endblock%}


